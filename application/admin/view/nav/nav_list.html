{include file="common/_meta2" /}

<title>文章列表</title>

</head>

<body>

<nav class="breadcrumb"><i class="Hui-iconfont">&#xe67f;</i> 首页 <span class="c-gray en">&gt;</span> 文章管理 <span class="c-gray en">&gt;</span> 文章列表 <a class="btn btn-success radius r" style="line-height:1.6em;margin-top:3px" href="javascript:location.replace(location.href);" title="刷新" ><i class="Hui-iconfont">&#xe68f;</i></a></nav>

<div class="page-container">

	<div class="cl pd-5 bg-1 bk-gray mt-20">

		<span class="l">

			<a class="btn btn-primary radius" onclick="nav_add('添加文章','{:url(\'Nav/nav_add\')}',800,500)" href="javascript:;"><i class="Hui-iconfont">&#xe600;</i> 添加文章</a>

		</span>
		<h5>分类说明:顶级分类中如果有下级分类请勿在该顶级分类下编辑文章</h5>
		<span class="r">共有数据：<strong>{$count}</strong> 条</span>

	</div>

	<div class="mt-20">

		<table class="table table-border table-bordered table-bg table-hover table-sort">

			<thead>

				<tr class="text-c">

					<th width="25"><input type="checkbox" name="" value=""></th>

					<th width="80">ID</th>

					<th>标题</th>
					<!-- <th>案例跳转链接</th> -->

					<th width="100">分类</th>

					<th width="150">更新时间</th>

					<th width="100">操作</th>

				</tr>

			</thead>

			<tbody>

				{volist name="list" id="vo"}

				<tr class="text-c">

					<td><input type="checkbox" name="ids[]" value="{$vo.nav_id}" name=""></td>

					<td>{$vo.nav_id}</td>

					<td class="text-l">

						<u style="cursor:pointer" class="text-primary" onClick="nav_edit('查看','{:url(\'Nav/nav_edit\',[\'nav_id\'=>$vo.nav_id])}','{$vo.nav_id}')" title="查看">

							{$vo.title}

						</u>

					</td>
					<!-- <td>{$vo.url}</td> -->

					<td>

						{volist name="rs" id="voo"}

						{if $vo.category_id==$voo.category_id}

						{$voo.name}

						{/if}

						{/volist}

					</td>

					<td>{$vo.inputtime|date=('Y-m-d H:i:s'),###}</td>

					<td class="f-14 td-manage">

						<a style="text-decoration:none" class="ml-5" onClick="nav_edit('编辑文章','{:url(\'Nav/nav_edit\',[\'nav_id\'=>$vo.nav_id])}','{$vo.nav_id}')" href="javascript:;" title="编辑"><i class="Hui-iconfont">&#xe6df;</i></a>

						<a style="text-decoration:none" class="ml-5" onClick="nav_del(this,'{$vo.nav_id}')" href="javascript:;" title="删除"><i class="Hui-iconfont">&#xe6e2;</i></a></td>

				</tr>

				{/volist}

			</tbody>

		</table>

	</div>

</div>

{include file="common/_script2" /}

<script type="text/javascript">

$('.table-sort').dataTable({

	"aaSorting": [[ 1, "desc" ]],//默认第几个排序

	"bStateSave": true,//状态保存

	"aoColumnDefs": [

	  //{"bVisible": false, "aTargets": [ 3 ]} //控制列的隐藏显示

	  {"orderable":false,"aTargets":[0,5]}// 不参与排序的列

	]

});



/*添加*/

function nav_add(title,url,w,h){

	//layer_show(title,url,w,h);



	var index = layer.open({

		type: 2,

		title: title,

		content: url

	});



	layer.full(index);

}

/*编辑*/

function nav_edit(title,url,id,w,h){

	layer_show(title,url,w,h);



	var index = layer.open({

		type: 2,

		title: title,

		content: url

	});

	layer.full(index);



}

/*删除*/

function nav_del(obj,id){

	 layer.confirm('确认要删除吗？',function(index){

		 $.ajax({

			 type: "POST",

			 url: "{:url('Nav/nav_del')}",

			 data: {nav_id:id},

			 dataType: "json",

			 success: function(data){
				 if(data.success == 1){

					 $(obj).parents("tr").remove();

					 layer.msg('已删除!',{icon:1,time:1000});

				 }else{

					 layer.msg('已取消操作!',{icon:1,time:1000});

				 }

			 }

		 });

	 });

 }

</script> 

</body>

</html>